<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>3J Classtream</title>

  <link rel="stylesheet" type="text/css" href="style/marquee.css">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/1.0.26/vue.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
</head>

<body>
  <script>
    var slackbot = require('slackbots');
    var config = require('./config');
    var fs = require('fs');

    // 設定を読み込む
    var config = fs.readFileSync('config.json', 'utf-8');
    var key = JSON.parse(config);

    var bot = new slackbot({
      token: key.token,
      name: 'classtream'
    });

    /**
      * Slackからメッセージを受け取る
      */
    bot.on('message', function (data) {
      console.log(data);
    });

    /**
      * Classtreamの開始メッセージを送信
      */
    bot.on('start', function () {
      var params = {
        icon_emoji: ':cat:'
      };
      bot.postMessageToChannel(key.channel, 'Start classtream !', params);
    });
  </script>

  <div id="screen">
  </div>
  <script src='script/comment.js'></script>

  <canvas id="graph" height="350" width="600"></canvas>
  <script src="script/graph.js"></script>
</body>
</html>
